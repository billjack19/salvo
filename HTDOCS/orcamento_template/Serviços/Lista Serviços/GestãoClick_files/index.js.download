var tour,endTour;
$(document).ready(function() {
    tour = new Tour({
      onEnd: function() {
        endTour.restart();
      },
      steps: [
      {
        placement: 'right',
        element: '#botao-adicionar',
        title: 'Adicionar serviço',
        content: 'Neste botão poderá cadastrar um novo Serviço.',
        backdrop: true,
      },
      {
        placement: 'right',
        element: '#botao-exportar',
        title: 'Exportar serviços',
        content: 'Neste botão poderá exportar os cadastros em formato xls.',
        backdrop: true,
      },
      {
        placement: 'bottom',
        element: '#serviçoNome',
        title: 'Filtro',
        content: 'Aqui você pode pesquisar os serviços por alguma parte do nome.',
        backdrop: true,
        onNext: function() {
            if(!$('.index .btn-info:first').length){
                tour.end();
                endTour.restart();
            }
        },
      },
      {
        placement: 'top',
        element: '.index tbody tr:first',
        title: 'Resumo do serviço',
        content: 'Aqui você visualiza um resumo do serviço.',
        backdrop: true,
      },
      {
        placement: 'left',
        element: '.index .btn-info:first',
        title: 'Visualizar serviço',
        content: 'Neste botão poderá visualizar os detalhes do serviço.',
        backdrop: true,
      },
      {
        placement: 'left',
        element: '.index .btn-warning:first',
        title: 'Editar serviço',
        content: 'Neste botão poderá atualizar os dados do serviço.',
        backdrop: true,
      },
      {
        placement: 'left',
        element: '.index .btn-danger:first',
        title: 'Deletar serviço',
        content: 'Neste botão poderá excluir o serviço.',
        backdrop: true,
        onNext: function() {
            if($('.index .btn-info:first').length){
                tour.end();
                endTour.restart();
            }
        },
      },
      {

      }
    ]});

    endTour = new Tour({
      steps: [
      {
        placement: 'left',
        element: '#start-tour',
        title: 'Passo-a-passo',
        content: 'Sempre que quiser ver este passo-a-passo, clique neste botão.',
        backdrop: true,
        onNext: function() {
          endTour.end();
        },
      },
      {

      }
    ]});

    $('.start-tour').click(function(){
        tour.restart();
    });

    $('.end-tour').click(function(){
        endTour.restart();
    });
});

function getTourElement(tour){
   return tour._options.steps[tour._current].element
}