<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Orçamento - CDI</title>
	<link rel='shortcut icon' href="../../dist/img/icone.ico" />
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<!-- Bootstrap 3.3.7 -->
	<link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="../../bower_components/font-awesome/css/font-awesome.min.css">
	<!-- Ionicons -->
	<link rel="stylesheet" href="../../bower_components/Ionicons/css/ionicons.min.css">
	<!-- Select2 -->
	<!-- <link rel="stylesheet" href="../../bower_components/select2/dist/css/select2.min.css"> -->

	<link href="../../lb/jquery-flexdatalist/jquery.flexdatalist.min.css" rel="stylesheet" type="text/css">

	<!-- Theme style -->  
	<link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
	<!-- DataTables -->
	<link rel="stylesheet" href="../../bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
	<!-- AdminLTE Skins. Choose a skin from the css/skins
			 folder instead of downloading all of them to reduce the load. -->
	<link rel="stylesheet" href="../../dist/css/skins/_all-skins.min.css">
	<!-- Morris chart -->
	<link rel="stylesheet" href="../../bower_components/morris.js/morris.css">
	<!-- jvectormap -->
	<link rel="stylesheet" href="../../bower_components/jvectormap/jquery-jvectormap.css">
	<!-- Date Picker -->
	<link rel="stylesheet" href="../../bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
	<!-- Daterange picker -->
	<link rel="stylesheet" href="../../bower_components/bootstrap-daterangepicker/daterangepicker.css">
	<!-- bootstrap wysihtml5 - text editor -->
	<link rel="stylesheet" href="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<!-- Google Font -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

</head>
<!-- <body class="hold-transition skin-blue sidebar-mini"> -->
<body class="hold-transition skin-blue fixed sidebar-mini">

<div class="wrapper" id='conteudoGeral'>


<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
	<!-- Content Header (Page header) -->
	<section class="content-header">
		<h1 id='tituloPagina'>
			Orçamento Web CDI
			<small>Painel de Controle</small>
		</h1>
		<ol class="breadcrumb">
			<li><a href="../../principal.html"><i class="fa fa-history"></i> Pagina Principal</a></li>
			<li><a href="../../view/orcamento/index.html">Orçamento</a></li>
			<li class="active">Adicionar</li>
		</ol>
	</section>


	<!-- Main content -->
	<section class="content">

		<!-- Default box -->
		<div class="box">

			<div class="box-header with-border">
				<h3 class="box-title">
					<span id="descricaoTela">Adicionar Orçamento</span><span id="codigoPedido" name="codigoPedido"></span>
				</h3>

				<div class="box-tools pull-right">
					
					<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Minimizar">
						<i class="fa fa-minus"></i>
					</button>
					<!-- <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"> -->
						<!-- <i class="fa fa-times"></i> -->
					<!-- </button> -->
				</div>
			</div>

			<div class="box-body">

				<div style="display: none;">
					<div class="col-xs-5 col-md-8"></div>
					<div class="col-xs-7 col-md-4">
						<div class="input-group date">
							<div class="input-group-addon" 
								onclick="
									$('#dataDoPedido').val(formatarDataUN(pegarData())); montarListaOrcamento(pegarData())"
							>
								<i class="fa fa-calendar"></i>
							</div>
							<input type="text" onchange='montarListaOrcamento( formataData(this.value) )' class="form-control pull-right" id="dataDoPedido">
						</div>
						<br>
					</div>
					<div class="col-xs-12 table-responsive" id='tabelaDinamica'></div>
					<!-- Start creating your a mazing application! -->
				</div>






<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- Formulario adicionar orçamento Inicio -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->






	<div class="box">
		<div class="alert alert-warning margin-top-0" id='notificacaoAlertTela'>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">×</span>
			</button>
			Os campos marcados com <b class="text-red">*</b> são de preenchimento obrigatório.
			<br>
			Para adicionar um orçamento é preciso pelo menos um item a este pedido
		</div>
		<script type="text/javascript">
			if (localStorage.alertTelaAdicionarOrcamento) {
				if (localStorage.getItem(alertTelaAdicionarOrcamento) ) {}
			}
		</script>
		<div class="row">
			<!-- <form action="https://gestaoclick.com/orcamentos_produtos/adicionar?retorno=https%3A%2F%2Fgestaoclick.com%2Forcamentos_produtos" role="form" id="PedidoAdicionarForm" method="post" accept-charset="utf-8" novalidate="novalidate"> -->
				<div style="display:none;">
					<input type="hidden" name="_method" value="POST">
				</div>
					<div class="col-sm-12 col-lg-12 col-md-12">
						<div>
							<div class="responsive">
								<div id="dados-gerais" class="col-sm-12 col-lg-12 col-md-12">
	
<fieldset class="muted">
	<legend>
		<h4 class="text-primary">
			<i class="fa fa-list-alt margin-right-5px"></i>&nbsp;&nbsp;&nbsp;Dados gerais
		</h4>
	</legend>
	
	<div class="form-group col-sm-6 col-md-6 col-lg-6">
		<label>Emissão</label>
		<input type='date' id='dataEmissaoPedido' name='dataEmissaoPedido' class='form-control' value='' disabled>
		<!-- <input class="mascara-data form-control datepicker" value="26/05/2018" type="text" id="PedidoData" disabled> -->
	</div>
	<div class="form-group col-sm-6 col-lg-6 col-md-6">
		<label>Valor Total</label>
		<input type='text' id='totalPedido' name='totalPedido' value='R$ 0,00' class='form-control' style='text-align: right;' disabled>
		<!-- <input type="text" class="form-control" style="text-align: right;" value="R$ 0,00" id="valorTotalPedido" disabled> -->
	</div>


	<div class="form-group col-sm-6 col-md-6 col-lg-6 required">
		<label>Codigo</label>
		<input class='form-control hidden' type='text' id='codigoCliente' onkeyup="mudarCliente(this.value)">
		<div id='clienteComboDatalist'>
			<input type="text" value="Carregando..." disabled class="form-control">
		</div>
		<!-- <input type="text" class="form-control" id="codigoClienteId" style="outline: none;" required> -->
	</div>


	<div class="required form-group col-sm-6 col-md-6 col-lg-6">
		<label>Cliente <b class="text-red">*</b></label>
		<input type='text' class='form-control' id='clienteSemRegistro' onkeyup='setarSemRegistro(this.value)'>
		<input type='text' style="display: none;" class='form-control' id='clienteSelecionado' disabled>
		<!-- <div id="comboClienteDiv"> -->
			<!-- <input type="text" class="form-control" id="razaosocialClienteId" style="outline: none;" required> -->
		<!-- </div> -->
	</div>

	
	<div class="form-group col-sm-6 col-lg-6 col-md-6">
		<label>Contato </label>
		<input type='text' class='form-control' id='contatoPedido'>
		<!-- <input type="text" class="form-control" id="PedidoAosCuidadosDe"> -->
	</div>


	<div class="form-group col-sm-6 col-lg-6 col-md-6">
		<label>Telefone </label>
		<input class='form-control' type='tel' id='telefoneCliente'>
		<!-- <input type="text" class="form-control" id="PedidoAosCuidadosDe"> -->
	</div>

</fieldset>
					</div>

					<style>
						.campo-desconto{
							width: 50px !important;
							padding-left: 5px !important;
							padding-right: 5px !important;
						}
					</style>
					
					<div id="produtos" class="table-responsive-xs padding-bottom-0 produtos-servicos col-sm-12 col-lg-12 col-md-12">




<fieldset class="muted">
	<legend>
		<h4 class="text-primary">
		<i class="fa fa-list margin-right-5px"></i>&nbsp;&nbsp;&nbsp;Produtos</h4>
	</legend>



	



	<div class="col-xs-12">
		<button onclick="abrirModalAddItem();" class="margin-top-10px btn btn-primary">
			Adicionar outro produto
		</button>
	</div>
	<br><br>

	<div id='conteudoItensPedidoExclusivo' class="col-xs-12">
		<h3 class='text-center'>Nenhum Item no Pedido</h3>
	</div>

</fieldset>
					</div>
					<style>
						.campo-desconto{
							width: 50px !important;
							padding-left: 5px !important;
							padding-right: 5px !important;
						}
					</style>


					<div id="transporte" class="table-responsive-xs padding-bottom-0 col-sm-12 col-lg-12 col-md-12">


<fieldset class="muted">
	<legend>
		<h4 class="text-primary">
			<i class="fa fa-truck margin-right-5px"></i>&nbsp;&nbsp;&nbsp;Transporte
		</h4>
	</legend>


	<table class='table' style='margin-top:-15px'>
		<tr>
			<td colspan='2' style='text-align:center;padding-bottom:0px;'>
				<div class='col-xs-12'>
					<div class='text-left col-xs-6' style='font-size: 25px;' id='esquerdaEndereco'>
					</div>
					<!-- <div class='text-center col-xs-4'>
						<h4 style='margin-bottom:0px;'>
							Local Entrega
						</h4>
						<br>
					</div> -->
					<div class='text-right col-xs-6' style='font-size: 25px;' id='diretaEndereco'>
					</div>
					<br><br>
					<div class='text-center col-xs-12 hidden' style='font-size: 20px;' id='indicePagEndereco'>
					</div>
				</div>
			</td>
		</tr>
	</table>


	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"></div>
	

	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
		<label>Cep</label>
		<input type="tel" class="form-control" data-inputmask='"mask": "99999-999"' data-mask id='cepCliente' onkeyup="
			buscarCep(
				this.value, 'enderecoCliente,numeroCliente,bairroCliente,cidadeCliente,estadoCliente,cepCliente'
			);
		">
		<!-- <input type='text' class='form-control' rel=cep id='cepCliente' onkeyup="
			buscarCep(
				this.value, 
				'[\'enderecoCliente\',\'numeroCliente\',\'bairroCliente\',\'cidadeCliente\',\'estadoCliente\',\'cepCliente\']'
			);
		"> -->
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>

	<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
		<label>Endereço</label>
		<input type='text' class='form-control' id='enderecoCliente'>
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>

	<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
		<label>Número</label>
		<input type='tel' class='form-control' id='numeroCliente'>
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>

	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
		<label>Bairro</label>
		<input type='text' class='form-control' id='bairroCliente'>
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>

	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
		<label>Cidade</label>
		<input type='text' class='form-control' id='cidadeCliente'>
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>

	<div class='col-sm-9'></div>
	<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
		<label>Estado</label>
		<input type='text' class='form-control' id='estadoCliente'>
		<!-- <input type="text" class="form-control" id="cep_endereco"> -->
	</div>
</fieldset>
					</div>




					<div id="forma-pagamento" class="table-responsive-xs padding-bottom-0 col-sm-12 col-lg-12 col-md-12">
<fieldset class="muted">
	<legend>
		<h4 class="text-primary">
			<i class="fa fa-money margin-right-5px"></i>&nbsp;&nbsp;&nbsp;Pagamento
		</h4>
	</legend>



	<div class="form-group col-sm-6 col-md-6 col-lg-6">
		<label for="PedidoFormaPagamentoId">Forma de pagamento</label>
		
		<div id='condPagamaentoDiv'></div>

	</div>


</fieldset>
					</div>


					<div class=" padding-bottom-0 col-sm-12 col-lg-12 col-md-12">
<fieldset class="muted">
	<legend>
		<h4 class="text-primary" style="margin-bottom:0">
			<i class="fa fa-pencil-square-o margin-right-5px"></i>&nbsp;&nbsp;&nbsp;Observações
		</h4>
	</legend>
	<!-- <small>
		<i>Esta observação será impressa no pedido.</i>
	</small> -->
	<input type='text' id='observacaoOrcamento' class='form-control'>
	<!-- <input name="data[Pedido][observacoes]" class="form-control" autocomplete="off" cols="30" rows="6" id="PedidoObservacoes"> -->
	<br>
</fieldset>
					</div>

				</div>
			</div>
			<div class="both col-sm-12 col-lg-12 col-md-12 margin-top-10px">
				<button id="novo" class="btn btn-primary btn-responsive" onclick="confirmaAdicionarPedio()">
					<span class="glyphicon glyphicon-file"></span> Novo
				</button>
				<button id="cadastrar" class="btn btn-success btn-responsive" onclick="salvarPedido()">
					<span class="glyphicon glyphicon-ok"></span> Cadastrar
				</button>
				<button class="btn btn-danger btn-responsive" onclick="cancelarPedido()">
					<span class="glyphicon glyphicon-remove"></span> Cancelar
				</button>
			</div>
		</div>
	<!-- </form> -->
	</div>
	</div>














<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- Fim Formulario de adicionar orcamento -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->
<!-- *************************************************************************************************************************** -->













			</div>
			<!-- /.box-body -->
			<!-- <div class="box-footer"> -->

				<!-- Footer -->
			<!-- </div> -->

			<!-- /.box-footer-->
		</div>
		<!-- /.box -->

	</section>
	<!-- /.content -->



	<!-- Main content -->
	<!-- <section class="content"> -->

		<!-- Main row -->
		<!-- <div class="row"> -->

		<!-- </div> -->
		<!-- /.row (main row) -->
	<!-- </section> -->
	<!-- /.content -->
</div>
<!-- /.content-wrapper -->




<footer class="main-footer fixed">
	<div class="pull-right hidden-xs">
		<b>Version</b> 1.0
	</div>
	<strong>
		Desenvolvido por <a href="http://cdiinfo.com.br/" target="_blank"> CDI Informática e Contabilidade</a>.
	</strong>
</footer>










<!-- Control Sidebar -->
<aside class="control-sidebar control-sidebar-dark" id='conteudoMenuGear'>
</aside>
<script type="text/javascript" src="../../componetes/conteudoMenuGear.js"></script>
<!-- /.control-sidebar -->









<!-- Modal Adicionar Item ao Orçamento -->
<div class="modal fade" id="modalAddItem" role="dialog">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" onclick="setStatus('pagina3');setarIpCampoConfig();"  id="fecharModalIpBottun" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Adicionar Produto:</h4>
			</div>
			<div class="modal-body">

				<div class="col-xs-12">
					<div class="form-group col-xs-5 col-sm-3 col-lg-3 col-md-3">
						<label>Codigo</label>
						<input type='tel' class='form-control' id='codigoItem' onkeyup="mudarItem(this.value)">
					</div>

					<div class="form-group col-xs-7 col-sm-9 col-lg-9 col-md-9">
						<label>Item</label>
						<div id='itemComboDatalist'>
							<input type="text" value="Carregando..." disabled class="form-control">
						</div>
					</div>
					<br><br><br><br>
					<div class="col-sm-6 col-lg-6 col-md-6" >
						<label>Quantidade</label>
						<table width="100%">
							<tr>
								<td width='50%'>
									<input type='tel' style='text-align: right;' class='form-control' id='qdtItem' value='1' onkeyup='selecionarUnidade()' onfocus='setarItemSeleconado()'>
								</td>
								<td width='25%'>
									<button class='btn btn-block' onclick='mudarQdtItem("+")'>
										<i class='fa fa-plus'></i>
									</button>
								</td>
								<td width='25%'>
									<button class='btn btn-block' onclick='mudarQdtItem("-")'>
										<i class='fa fa-minus'></i>
									</button>
								</td>
							</tr>
						</table>
					</div>

					<div class="form-group col-sm-6 col-lg-6 col-md-6">
						<label>Unidade de Mendida</label>
						<div id='divSelectUnidade'>
							<input type="text" class="form-control" value="Nenhum item selecionado" disabled>
						</div>
					</div>

					<div class="form-group col-sm-4 col-lg-4 col-md-4">
						<label>Quantidade Principal</label>
						<input type='text' style='text-align: right;' class='form-control' id='qtdPrincipal' value='1' disabled>
					</div>

					<div class="form-group col-sm-4 col-lg-4 col-md-4">
						<label>Valor Unitario</label>
						<input type='text' style='text-align: right;' class='form-control' id='vlrVenda' onkeyup='selecionarUnidade()'>
					</div>

					<div class="form-group col-sm-4 col-lg-4 col-md-4">
						<label>Valor Total</label>
						<input type='text' style='text-align: right;' class='form-control' id='vlrTotal' disabled>
					</div>


					<div class="form-group col-sm-4 col-lg-4 col-md-4">
						<label>Estoque</label>
						<input type='text' style='text-align: right;' class='form-control' id='estoqueProduto' disabled>
					</div>
				</div>
				<!-- <br><br><br><br><br><br><br><br><br><br> -->
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-success" onclick="salvarPedido()">
					<i class="fa fa-check"></i>&nbsp;&nbsp;Adicionar
				</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">
					<i class="fa fa-times"></i>&nbsp;&nbsp;Fechar
				</button>
			</div>
		</div>
	</div>
</div>















	<!-- Add the sidebar's background. This div must be placed
			 immediately after the control sidebar -->
	<div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
<script type="text/javascript">
	var prefixoCaminho = "../../";

	var usuario_Global = "";
	var empresa_Global = "";

	if (localStorage.empresa_Global && localStorage.usuario_Global) {
		usuario_Global = JSON.parse(localStorage.getItem("usuario_Global"));
		empresa_Global = JSON.parse(localStorage.getItem("empresa_Global")); 
	} else {
		alert("Você não logado para acessar o sistema!");
		window.location.assign(prefixoCaminho + "index.html");
	}
</script>
<script type="text/javascript" src="../../componetes/menu.js"></script>

<script type="text/javascript">
	/* if (localStorage.empresa_Global && localStorage.usuario_Global) { */
	/* 	empresa_Global = JSON.parse(localStorage.getItem("empresa_Global")); */
	/* 	usuario_Global = JSON.parse(localStorage.getItem("usuario_Global")); */

	/* console.log(empresa_Global); */
	/* console.log(usuario_Global); */

	var especificaoesUsuario = usuario_Global.nome  /* + " - Vendedor" */
							 + "<small>" + empresa_Global.RAZAOSOCIAL + "</small>";
	
	document.getElementById("usuarioLogado").innerHTML = usuario_Global.nome;
	document.getElementById("usuarioLogado2").innerHTML = usuario_Global.nome;

	document.getElementById("especificaoesUsuario").innerHTML = especificaoesUsuario;
	/* } else { */
	/* 	alert("Você não logado para acessar o sistema!"); */
	/* 	window.location.assign(prefixoCaminho + "index.html"); */
	/* } */


	try{
		if (empresa_Global.WEB_NOME_REDUZIDO != "") {
			document.getElementById("setarNomeEmpresa").innerHTML = empresa_Global.WEB_NOME_REDUZIDO;
		} else {
			document.getElementById("setarNomeEmpresa").innerHTML = empresa_Global.RAZAOSOCIAL.split(" ")[0];
		}
	}catch(error){
		document.getElementById("setarNomeEmpresa").innerHTML = empresa_Global.RAZAOSOCIAL.split(" ")[0];
	}
</script>



<!-- jQuery 3 -->
<script src="../../bower_components/jquery/dist/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="../../bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
	$.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Select2 -->
<!-- <script src="../../bower_components/select2/dist/js/select2.full.min.js"></script> -->

<script src="../../lb/jquery-flexdatalist/jquery.flexdatalist.min.js"></script>

<!-- InputMask -->
<script src="../../plugins/input-mask/jquery.inputmask.js"></script>
<script src="../../plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
<script src="../../plugins/input-mask/jquery.inputmask.extensions.js"></script>
<!-- Morris.js charts -->
<script src="../../bower_components/raphael/raphael.min.js"></script>
<script src="../../bower_components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script src="../../bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="../../plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="../../plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="../../bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="../../bower_components/moment/min/moment.min.js"></script>
<script src="../../bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="../../bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- DataTables -->
<script src="../../bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../../bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<!-- Slimscroll -->
<script src="../../bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../../bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../../dist/js/adminlte.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="../../dist/js/pages/dashboard.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../dist/js/demo.js"></script>

<script type="text/javascript" src="../../js/scripts.js"></script>



<script>

/* Configurações iniciais */
if (!localStorage.usuario_Global) {
	window.location.assign("index.html");
}

/*
var caminhoServer = "http://192.168.100.15:8088/Araguaia/controllers/" ;
var caminhoRequisicao = "http://cdiinfo.com.br/aplicacoes_web/orcamento/controllers/";
caminhoServer = caminhoRequisicao;
*/

/*  Variaveis Globais  */
/* var usuario_Global =  JSON.parse( localStorage.getItem("usuario_Global") ); */
var pedido_Global = "";
var pedido_item_Global = "";
var pedido_edit_Global = "";
var indicePedido_Global = 0;
var clientes_list_Global = "";
var cliente_Global = "";
var item_list_Global = "";
var item_Global = "";
var preco_minimo_Global = true;
var statusPedido_Gloabal = "";
var ultimaPaginaGlobal = "conteudoPedido";

var parametroCodigoDinheiro_Global = 5;


$('[data-mask]').inputmask();
$("#dataEmissaoPedido").val(pegarData());









/********************************************************************************************************************/
/* Todea logica de orçamento */
/********************************************************************************************************************/
function adcionarPedido(){
	/* Setar classe no botão fixo de barras (para aparecer) este botão é o que chama o menu lateral */
	var valorSetadoPedido = "";
	cliente_Global = "";

	if ( localStorage.getItem("id_pedido_Gloabal") == -1 || localStorage.getItem("id_pedido_Gloabal") == "-1" ) {
		$("#descricaoTela").html("Adicionar Orçamento");
		motarComboListCliente('clienteComboDatalist');
		$("#codigoPedido").html("");
		setarStatusGeralPedido();
	} else {
		$("#descricaoTela").html("Editar Orçamento: ");
		/* Preencher com dados do pedido selecionado */
		pedido_Global = JSON.parse( localStorage.getItem("pedido_Global") );
		pedido_edit_Global = pedido_Global[localStorage.getItem("id_pedido_Gloabal")];
		/* console.log(pedido_edit_Global); */
		setarClientePedidoEditar();
		valorSetadoPedido = pedido_edit_Global.pagamento;
	}
	setarCondicoesPag(valorSetadoPedido);
	/* mask(); */
}


adcionarPedido();


function setarStatusGeralPedido(){
	statusPedido_Gloabal = {
		tipoCliente: typeof(cliente_Global),
		descricaoCliente: $("#clienteSemRegistro").val(),
		tipoItem: typeof(item_Global),
		telefone: $("#telefoneCliente").val(),
		cep: $("#cepCliente").val(),
		endereco: $("#enderecoCliente").val(),
		numero: $("#numeroCliente").val(),
		bairro: $("#bairroCliente").val(),
		cidade: $("#cidadeCliente").val(),
		estado: $("#estadoCliente").val(),
		observacaoOrcamento: $("#observacaoOrcamento").val(),
		codPagamntoSelect: $("#codPagamntoSelect").val(),
		codigoItem: $("#codigoItem").val(),
		itemCombo_Global: $("#itemCombo_Global").val(),
		itemCombo_Global_flexdatalist: $("#itemCombo_Global-flexdatalist").val(),
		qdtItem: $("#qdtItem").val(),
		qtdPrincipal: $("#qtdPrincipal").val(),
		divSelectUnidade: $("#divSelectUnidade").html(),
		vlrVenda: $("#vlrVenda").val(),
		vlrTotal: $("#vlrTotal").val(),
		estoqueProduto: $("#estoqueProduto").val(),
		conteudoItensPedidoExclusivo: $("#conteudoItensPedidoExclusivo").html(),
		totalPedido: $("#totalPedido").val(),
		contato: $("#contatoPedido").val()
	}
}



function setarCondicoesPag(preValor){
	$.ajax({
		url: caminhoServer+"pagamento.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'listarCondPag':true,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(data){
		/* console.log(data); */
		data = JSON.parse(data);
		/* console.log(data); */
		var selectCodPagamento = "";
		var selecionado = "";

		preValor = preValor == "" ? parametroCodigoDinheiro_Global : preValor.split(" ")[0];
		preValor = !isNaN(preValor) ? Number(preValor) : parametroCodigoDinheiro_Global;

		selectCodPagamento += "<select id='codPagamntoSelect' class='form-control'>";
		for (var i = 0; i < data.length; i++) {

			selecionado = data[i].codigo == preValor ? "selected" : "";

			selectCodPagamento += 	"<option value='"+data[i].codigo+" "+data[i].descricao+"' "+selecionado+">";
			selectCodPagamento += 		data[i].descricao;
			selectCodPagamento += 	"</option>";
		}
		selectCodPagamento += "</select><br>";

		$("#condPagamaentoDiv").html(selectCodPagamento);
	});
}


function salvarPedido(){
	/* document.getElementById("btnSalvarPedido").disabled = true; */
	
	/* Varificar se tem cliente selecionado e se tem item selecionado tambem */
	if($("#clienteSemRegistro").val() != ""){
		try{
			if($("#clienteCombo_Global-flexdatalist").val() != "" && $("#clienteCombo_Global-flexdatalist").val() != "0"){
			/* if (cliente_Global.razaosocial == $("#clienteSemRegistro").val()) { */
				if (cliente_Global.codigo != undefined && cliente_Global.codigo != 0) {
					validarPedidoInsercao();
				} else {
					jk_toasth("error", "Cliente selecionado invalido", 5000);
				}
			} else {
				validarPedidoInsercao();
			}
		} catch(error){
			/* console.log("Deu pau no cliente (catch do try): " + error); */
			validarPedidoInsercao();
		}
	/* } else if (typeof(cliente_Global) == "object") {
		console.log(cliente_Global);
		if (cliente_Global.codigo != undefined && cliente_Global.codigo != 0) {
			console.log(cliente_Global.codigo);
			validarPedidoInsercao();
		} else {
			jk_toasth("error", "Cliente selecionado invalido", 5000);
		} */
	} else {
		alert("Para salvar é preciso ter algum cliente selecionado ou o nome caso não esteje cadastro");
		/* jk_toasth("error", "Para salvar é preciso ter algum cliente selecionado ou o nome caso não esteje cadastro", 5000); */
	}
}


function setarItemSeleconado(){
	if (typeof(item_Global) == "object") {
		$("#itemCombo_Global-flexdatalist").val(item_Global.descricao);
		document.getElementById("itemCombo_Global-flexdatalist-results").style.display = 'none';
	}
}


function validarPedidoInsercao(){
	/* console.log("validarPedidoInsercao"); */
	if ($("#codigoPedido").html() == "") {
		if (typeof(item_Global) == "object") {
			if (!isNaN($("#qdtItem").val()) && Number($("#qdtItem").val()) > 0 && Number($("#qdtItem").val()) < 1000000000 && preco_minimo_Global) {

				var totalPedido = document.getElementsByName("totalPedido");
				for (var i = 0; i < totalPedido.length; i++) totalPedido[i].value = $("#vlrTotal").val();

				salvarAlteracao();
			} else if (!preco_minimo_Global) {
				alert( "O valor de venda está abaixo do preço minimo que é "+formataValorParaImprimir(item_Global.preco_minimo) );
				/* jk_toasth("error", "O valor de venda está abaixo do preço minimo que é "+formataValorParaImprimir(item_Global.preco_minimo)); */
			} else {
				alert("Verifique o valor da quantidade");
				/* jk_toasth("error", "Verifique o valor da quantidade", 5000); */
			}
		} else {
			alert("Para salvar o pedido pela primeira vez deve haver um item selecionado!");
			/* jk_toasth("error", "Para salvar o pedido pela primeira vez deve haver um item selecionado!", 5000); */
		}
	} else {
		salvarAlteracao();
	}
}


function salvarAlteracao(){
	/* var clienteSemRegistro = $("#clienteSemRegistro").val(); */

	var codigoCliente = $("#clienteCombo_Global").val(); /* $("#codigoCliente").val(); */
	var codigoClienteFlex = $("#clienteCombo_Global").val();
	var descricaoCliente = $("#clienteSemRegistro").val();

	var codigoItem = $("#codigoItem").val();
	var codigoItemFlex = $("#itemCombo_Global").val();
	var descricaoItem = $("#itemCombo_Global-flexdatalist").val();

	/* Paramentros AJAX */
	var cliente = typeof(cliente_Global) == "object" ? cliente_Global.codigo : 0;
	var razaosocial = $("#clienteSemRegistro").val(); /* clienteSemRegistro == "" ? cliente_Global.razaosocial : clienteSemRegistro; */

	try { 			var unidade_medida = item_Global.unidade_medida[$("#selectUnidadeMedid").val()].unidade_medida } 
	catch(erro){ 	var unidade_medida = ""; }


	$.ajax({
		url: caminhoServer+"pedido.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'adicionarPedidoItem': true,
			'filial': usuario_Global.filial,

			'documento': $("#codigoPedido").html(),
			'emissao': $("#dataEmissaoPedido").val(),
			'total': formataValorParaCalcular2($("#totalPedido").val()),

			'endereco': $("#enderecoCliente").val(),
			'numero': $("#numeroCliente").val(),
			'bairro': $("#bairroCliente").val(),
			'cidade': $("#cidadeCliente").val(),
			'estado': $("#estadoCliente").val(),
			'cep': $("#cepCliente").val(),
			'telefone': $("#telefoneCliente").val(),
			'cliente': cliente,
			'razaosocial': razaosocial,
			'flagcancelada': 0,
			'usuario': usuario_Global.identificacao,
			'pagamento': $("#codPagamntoSelect").val(),
			'observacao': $("#observacaoOrcamento").val(),
			'vendedor': usuario_Global.vendedor,

			'contato': $("#contatoPedido").val(),

			'grupo': item_Global.grupo,
			'sub_grupo': item_Global.sub_grupo,
			'item': item_Global.item,
			'quantidade': parseFloat( formataValorParaCalcular2($("#qtdPrincipal").val()) ), /* $("#qdtItem").val(), */
			'valor_unitario': parseFloat( formataValorParaCalcular2($("#vlrVenda").val()) ),
			'unidade': unidade_medida,
			'valor_venda': formataValorParaCalcular2($("#vlrVenda").val()),
			'quantidadeprincipal': formataValorParaCalcular2($("#qtdPrincipal").val()),
			'valor_total': formataValorParaCalcular2($("#vlrTotal").val()),
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(data){
		/* console.log(data); */
		var arrayResultado = JSON.parse(data);
		/* console.log(arrayResultado); */
		/* if (arrayResultado.length > 1) { */
		pedido_edit_Global = arrayResultado[0];
		/* pedido_item_Global = arrayResultado[1]; */
		setarClientePedidoEditar();
		alert("Orçamento salvo!");
		$("#descricaoTela").html("Editar Orçamento: ");
		
		try 		{	$("#modalAddItem").modal("hide");							}
		catch(erro)	{ 	/* console.log("Erro ao tentar fechar modal: " + erro); */ 	}
		setarStatusGeralPedido();
	});
}



function cancelarPedido(){
	if ($("#codigoPedido").html() != "") {
		if (confirm("Tem certeza que deseja cancelar este orçamento?")) {
			$.ajax({
				url: caminhoServer+"pedido.php",
				type: 'POST',
				dataType: 'text',
				data:{
					'cancelarPedido': true,
					'filial': usuario_Global.filial,
					'documento': $("#codigoPedido").html(),
					'codigo_empresa': empresa_Global.CODIGO
				},
				error: function(){
					/* console.log("Deu pau na requisição"); */
				}
			}).done( function(data){
				/* console.log(data); */
				localStorage.setItem("id_pedido_Gloabal", "-1");
				adcionarPedido();
			});
		}
	} else {
		alert("Não tem orçamento salvo para cancelar!");
		/* jk_toasth("error", "Não tem orçamento salvo para cancelar!", 5000); */
	}
}


function setarClientePedidoEditar(){
	/* console.log(pedido_edit_Global); */

	var codigoPedido = document.getElementsByName("codigoPedido");
	for (var i = 0; i < codigoPedido.length; i++) {
		codigoPedido[i].innerHTML = pedido_edit_Global.documento;
	}

	var dataEmissaoPedido = document.getElementsByName("dataEmissaoPedido");
	for (var i = 0; i < dataEmissaoPedido.length; i++) {
		dataEmissaoPedido[i].value = pedido_edit_Global.emissao.substring(0,10);
	}

	$("#codigoItem").val("");
	$("#itemCombo_Global").val("");
	$("#itemCombo_Global-flexdatalist").val("");
	item_Global = "";
	$("#qdtItem").val(1);
	/* document.getElementById("divViewGeralUnd").className = "hidden"; */
	$("#qtdPrincipal").val("");
	$("#vlrVenda").val("");
	$("#vlrTotal").val("");
	$("#estoqueProduto").val("");

	$("#telefoneCliente").val(pedido_edit_Global.telefone);

	$("#observacaoOrcamento").val(pedido_edit_Global.observacao);

	if (pedido_edit_Global.contato != "errorNotFind") {
		$("#contatoPedido").val(pedido_edit_Global.contato);
	}

	try{
		$("#cepCliente").val(pedido_edit_Global.cep);
		$("#enderecoCliente").val(pedido_edit_Global.endereco);
		document.getElementById("enderecoCliente").disabled = true;
		$("#bairroCliente").val(pedido_edit_Global.bairro);
		document.getElementById("bairroCliente").disabled = true;
		$("#cidadeCliente").val(pedido_edit_Global.cidade);
		document.getElementById("cidadeCliente").disabled = true;
		$("#estadoCliente").val(pedido_edit_Global.estado);
		document.getElementById("estadoCliente").disabled = true;
		$("#numeroCliente").val(pedido_edit_Global.numero);
	} catch(erro){ /* console.log(erro); */ }

	document.getElementById("codigoCliente").disabled = true;
	document.getElementById("clienteSemRegistro").disabled = true;

	try {
		document.getElementById("clienteCombo_Global").disabled = true;
		document.getElementById("clienteCombo_Global-flexdatalist").disabled = true;
	} catch(erro) {
		/* console.log(erro); */
		var fundoFalso = "";
		fundoFalso += "<input type='text' class='hidden' id='clienteCombo_Global' disabled>";
		fundoFalso += "<input type='text' class='form-control' id='clienteCombo_Global-flexdatalist' disabled>";
		$("#clienteComboDatalist").html(fundoFalso);
		motarComboListItem('itemComboDatalist');
	}

	document.getElementById("clienteCombo_Global-flexdatalist").value = pedido_edit_Global.cliente;
	document.getElementById("clienteSemRegistro").value = pedido_edit_Global.razaosocial;
	
	if (pedido_edit_Global.cliente != 0) setarSoCliente(pedido_edit_Global.cliente);

	document.getElementById("clienteCombo_Global").disabled = pedido_edit_Global.cliente;

	/* document.getElementById("btnSalvarPedido").disabled = false; */
	pesquisaItensPedido();
}




function setarSoCliente(cliente){
	cliente = parseInt(cliente);
	if (jk_validaCampo(cliente, "", "")) {
		$.ajax({
			url: caminhoServer+"cliente.php",
			type: 'POST',
			dataType: 'text',
			data:{
				'listarClienteId': true,
				'id': cliente,
				'codigo_empresa': empresa_Global.CODIGO
			},
			error: function(){
				alert("Codigo inválido!");
				/* jk_toasth("error", "Codigo inválido!", 5000); */
				setarStatusGeralPedido();
			}
		}).done( function(data){
			/* console.log(data); */
			if(jk_validaCampo(data, "", "Codigo invalido!")){
				cliente_Global = JSON.parse(data);
			} else $("#codigoCliente").val(cliente_Global.codigo);
			setarStatusGeralPedido();
		});
	}
}






function atualizaTotal(total){
	$.ajax({
		url: caminhoServer+"pedido.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'atualizaTotal': true,
			'total': total,
			'filial': usuario_Global.filial,
			'documento': pedido_edit_Global.documento,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(data){
		/* console.log(data); */
	});
}




/*******************************************************************************************************/
/** Funções Itens do pedido */
/*******************************************************************************************************/
function pesquisaItensPedido(){
	$.ajax({
		url: caminhoServer+"pedido_item.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'listaPedidoItem': true,
			'filial': usuario_Global.filial,
			'documento': pedido_edit_Global.documento,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(data){
		/* console.log(data); */
		pedido_item_Global = JSON.parse(data);
		/* console.log(pedido_item_Global); */

		/* setarIndiceLanc_marketing(); */
		$("#conteudoItensPedidoExclusivo").html(montarTabelaItens2(true));
	});
}



function montarTabelaItens2(editar){
	var conteudo = "";
	 var valorTotal = 0; 
	if (pedido_item_Global.length == 0) {
		conteudo += "<h3>Nenhum registro encontrado</h3>";
	} else {
		conteudo += "<table width='100%' class='fontTable2'>";
		conteudo += 	"<tr>";
		conteudo += 		"<td colspan='3'><b>Descrição</b></td>";
		conteudo += 		"<td rowspan='2'></td>";
		conteudo += 	"</tr>";
		conteudo += 	"<tr>";
		/* conteudo += 		"<td colspan='3'>"; */
		/* conteudo += 			"<table width='100%'>" */
		/* conteudo += 				"<tr>"; */
		conteudo += 					"<td align='left' width='33%'>		<b>Qdt - U.M.</b>	</td>";
		conteudo += 					"<td align='center' width='33%'>	<b>Vlr. Uni.</b>	</td>";
		conteudo += 					"<td align='center' width='33%'>	<b>Vlr. Total</b>	</td>";
		/* conteudo += 				"</tr>"; */
		/* conteudo += 			"</table>"; */
		/* conteudo += 		"</td>" */
		conteudo += 	"</tr>";

		for (var i = 0; i < pedido_item_Global.length; i++) {
			/* pedido_item_Global[i] */
			conteudo += 	"<tr id='linhaPedidoItem"+i+"' style='border-top-style:solid;'>";
			conteudo += 		"<td colspan='4'>"+pedido_item_Global[i].item.item+" - "+pedido_item_Global[i].item.descricao+"</td>";
			
			if (editar) {
				conteudo += 	"<td align='center' rowspan='2' style='vertical-align: center'>";
				conteudo += 		"<button class='btn' onclick='excluirItem2("+i+")'>";
				conteudo += 			"<i class='fa fa-times' style='color: red'></i>";
				conteudo += 		"</button>";
				conteudo += 	"</td>";
			}
			
			conteudo += 	"</tr>";
			conteudo += 	"<tr id='linhaPedidoItem2"+i+"'>";

			conteudo += 		"<td align='left' width='33%'>"
			conteudo += 			String(pedido_item_Global[i].quantidade).replace('.',',') 
			conteudo +=				" - "
			conteudo += 			pedido_item_Global[i].unidade
			conteudo +=			"</td>";
			conteudo +=			"<td align='center' width='33%'>";
			conteudo += 			formataValorParaImprimir(pedido_item_Global[i].valor_unitario);
			conteudo += 		"</td>";
			conteudo += 		"<td align='center' width='33%'>";
			conteudo += 			formataValorParaImprimir(pedido_item_Global[i].valor_total);
			conteudo += 		"</td>";

			conteudo +=		"</tr>";
			
			valorTotal += parseFloat(pedido_item_Global[i].valor_total); 
		}
		conteudo += 	"<tr>";
		/* conteudo += 		"<td ></td>"; */
		conteudo += 		"<td align='right' colspan='3'><b>Total: </b></td>";
		conteudo += 		"<td align='right'>"+formataValorParaImprimir(valorTotal)+"</td>";
		conteudo += 		editar ? "<td></td>" : "";
		conteudo += 	"</tr>";
		conteudo += "</table>";
	}

	/* Atualiza o valor do pedido campo que aparece em todads as telas  */
	var totalPedido = document.getElementsByName("totalPedido");
	for (var i = 0; i < totalPedido.length; i++) {
		totalPedido[i].value = formataValorParaImprimir(valorTotal);
	}
	pedido_edit_Global.total = valorTotal;
	atualizaTotal(valorTotal);

	return conteudo;
}


function excluirItem2(indice){
	if (pedido_item_Global.length > 1) {
		if (confirm("Tem certeza que deseja excluir este pedido?")) {
			$.ajax({
				url: caminhoServer+"pedido_item.php",
				type: 'POST',
				dataType: 'text',
				data:{
					'deletarItemPedido': true,
					'filial': pedido_item_Global[indice].filial,
					'id':pedido_item_Global[indice].sequencia,
					'documento':pedido_item_Global[indice].documento,
					'valor':pedido_item_Global[indice].valor_total,
					'codigo_empresa': empresa_Global.CODIGO
				}
			}).done( function(data){
				/* console.log("Apagou o item"); */
				/* console.log(data); */
				if (jk_validaCampo(data, "Item excluido com sucesso!", "Falha ao excluir item")) {
					pesquisaItensPedido();
					$("#linhaPedidoItem"+indice).remove();
					$("#linhaPedidoItem2"+indice).remove();
				}
			});
		}
	} else {
		alert("Você não pode apagar todos os itens do pedido");
		/* jk_toasth("error", "Você não pode apagar todos os itens do pedido", 5000); */
	}
}



function motarComboListCliente(idDiv){
	$.ajax({
		url: caminhoServer+"cliente.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'listarSoCliente': true,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(dataCliente){
		/* console.log(dataCliente); */
		clientes_list_Global = JSON.parse(dataCliente);
		/* console.log(clientes_list_Global); */
		
		var montarInputList = "";

		if (clientes_list_Global.length == 0) {
			montarInputList += "<input type='text' class='form-control' id='clienteCombo_Global' placeholder='Sem registros (Cliente)' disabled>";
		} else {

			/* montarInputList += 	"<div class=\"form-group\">"; */
			/* montarInputList += 		"<label>Minimal</label>"; */
			/* montarInputList += 		"<select class=\"form-control select2\" id='clienteCombo_Global' style=\"width: 100%;\">"; */

			/* for (var i = 0; i < clientes_list_Global.length; i++) { */
			/* 	montarInputList += 		"<option value='" + clientes_list_Global[i].codigo + "'>" */
			/* 					+ 			clientes_list_Global[i].razaosocial */
			/* 					+ 		"</option>"; */
			/* } */

			/* montarInputList += 		"</select>"; */
			/* montarInputList += 		"<!-- <button class=\"btn btn-block btn-success\">"; */
			/* montarInputList += 			"<i class=\"fa fa-plus\"></i>&nbsp;&nbsp;&nbsp;Adicionar Cidade"; */
			/* montarInputList += 		"</button> -->"; */
			/* montarInputList += 	"</div>"; */


			montarInputList += "<input type='text' id='clienteCombo_Global'";
			montarInputList += "class='flexdatalist form-control' placeholder='Cliente'";
			montarInputList += "data-min-length='0' data-visible-properties='[\"razaosocial\"]' ";
			montarInputList += "data-selection-required='true' data-value-property='codigo' ";
			montarInputList += "onchange='mudarCliente(this.value)' onfocus='limparValorCombo(this.id)'";
			montarInputList += "disabled>";
		}
		$("#"+idDiv).html(montarInputList);

		setarValorComboNotRequi(clientes_list_Global,'clienteCombo_Global','codigo','razaosocial','c',0,"");
		/* $('#clienteCombo_Global').select2(); */
		motarComboListItem('itemComboDatalist');
	});
}

function setarValorComboNotRequi(eljson, id, value, descricao, accessKey, idValor, DescricaoValor){
	$('#'+id+'').flexdatalist({
		selectionRequired: false,
		valueProperty: value,
		searchIn: descricao,
		minLength: 0,
		data: eljson
	});
	document.getElementById( id + "-flexdatalist").disabled = false;
	document.getElementById( id + "-flexdatalist").accessKey = accessKey;

	if (idValor != 0 && DescricaoValor != "") {
		document.getElementById( id ).value = idValor;
		document.getElementById( id + "-flexdatalist" ).value = DescricaoValor;
	}
}



function motarComboListItem(idDiv){
	$.ajax({
		url: caminhoServer+"item.php",
		type: 'POST',
		dataType: 'text',
		data:{
			'listarSoItem': true,
			'filial': usuario_Global.filial,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(dataItem){
		/* console.log(dataItem); */
		item_list_Global = JSON.parse(dataItem);
		/* console.log(item_list_Global); */
		
		var montarInputList = "";

		if (item_list_Global.length == 0) {
			montarInputList += "<input type='text' class='form-control' id='itemCombo_Global' placeholder='Sem registros (Cliente)' disabled>";
		
		} else {

			/* montarInputList += 	"<div class=\"form-group\">"; */
			/* montarInputList += 		"<label>Minimal</label>"; */
			/* montarInputList += 		"<select class=\"form-control select2\" id='itemCombo_Global' style=\"width: 100%;\">"; */

			/* for (var i = 0; i < item_list_Global.length; i++) { */
			/* 	montarInputList += 		"<option value='" + item_list_Global[i].item + "'>" */
			/* 					+ 			item_list_Global[i].descricao */
			/* 					+ 		"</option>"; */
			/* } */

			/* montarInputList += 		"</select>"; */
			/* montarInputList += 		"<!-- <button class=\"btn btn-block btn-success\">"; */
			/* montarInputList += 			"<i class=\"fa fa-plus\"></i>&nbsp;&nbsp;&nbsp;Adicionar Cidade"; */
			/* montarInputList += 		"</button> -->"; */
			/* montarInputList += 	"</div>"; */


			montarInputList += "<input type='text' id='itemCombo_Global'";
			montarInputList += "class='flexdatalist form-control' placeholder='Cliente'";
			montarInputList += "data-min-length='0' data-visible-properties='[\"descricao\"]' ";
			montarInputList += "data-selection-required='true' data-value-property='item' ";
			montarInputList += "onchange='mudarItem(this.value)' onfocus='limparValorCombo(this.id)'";
			montarInputList += "required disabled>";
		}

		$("#"+idDiv).html(montarInputList);
		/* $('#itemCombo_Global').select2(); */
		setarValorCombo(item_list_Global,'itemCombo_Global','item','descricao','i',0,"");
	});
}




function setarValorCombo(eljson, id, value, descricao, accessKey, idValor, DescricaoValor){
	$('#'+id+'').flexdatalist({
		selectionRequired: true,
		valueProperty: value,
		searchIn: descricao,
		minLength: 0,
		data: eljson
	});
	document.getElementById( id + "-flexdatalist").disabled = false;
	document.getElementById( id + "-flexdatalist").accessKey = accessKey;

	if (idValor != 0 && DescricaoValor != "") {
		document.getElementById( id ).value = idValor;
		document.getElementById( id + "-flexdatalist" ).value = DescricaoValor;
	}
}



function mudarItem(item){
	if (jk_validaCampo(item, "", "")) {
		$.ajax({
			url: caminhoServer+"item.php",
			type: 'POST',
			dataType: 'text',
			data:{
				'listarItemId': true,
				'id': item,
				'filial': usuario_Global.filial,
				'codigo_empresa': empresa_Global.CODIGO
			},
			error: function(){
				/* jk_toasth("error", "Codigo inválido!", 5000); */
			}
		}).done( function(data){
			 /* console.log(data); */
			if(jk_validaCampo(data.substring(2, data.length).replace("}", ""), "", "")){
				item_Global = JSON.parse(data);
				/* console.log(item_Global); */

				var select_unidade = "";
				var selecionado = "";
				select_unidade += "<select id='selectUnidadeMedid' class='form-control' onchange='selecionarUnidade()'>";
				for (var i = 0; i < item_Global.unidade_medida.length; i++) {

					selecionado = item_Global.unidade_medida[i].unidade_medida == item_Global.unidade_medida_venda ? " selected" : "";

					select_unidade += 	"<option value='"+i+"'"+selecionado+">";
					select_unidade += 		item_Global.unidade_medida[i].descricao_unidade + " - " + item_Global.unidade_medida[i].unidade_medida;
					select_unidade += 	"</option>";
				}
				select_unidade += "</select><br>";

				/* document.getElementById('divViewGeralUnd').className = "col-sm-6"; */
				$("#divSelectUnidade").html(select_unidade);
				$("#codigoItem").val(item);
				$("#itemCombo_Global").val(item);
				$("#select2-itemCombo_Global-container").val(item.descricao);
				$("#itemCombo_Global-flexdatalist").val(item_Global.descricao);
				$("#vlrVenda").val(formataValorParaImprimir(item_Global.preco_medio));
				$("#estoqueProduto").val(item_Global.estoque);

				selecionarUnidade();
			} else $("#codigoItem").val(item_Global.codigo);
		});
	}
}



function abrirModalAddItem(){
	$("#modalAddItem").modal("show");
}





function selecionarUnidade(){
	/* console.log("selecionarUnidade"); */
	var indice = $("#selectUnidadeMedid").val();
	var quantidade = item_Global.unidade_medida[indice].quantidade;
	var unidade_medida = item_Global.unidade_medida[indice].unidade_medida;
	var preco_medio = item_Global.preco_medio;
	var vlrVenda = formataValorParaCalcular2($("#vlrVenda").val());
	var preco_minimo = item_Global.preco_minimo;

	/* console.log("vlrVenda: "+vlrVenda+"\npreco_minimo: "+preco_minimo); */
	/* console.log(item_Global); */

	if (vlrVenda < preco_minimo) 	preco_minimo_Global = false;
	else 							preco_minimo_Global = true;

	try {
		$("#qtdPrincipal").val( formatarValorParaDecimal(parseFloat(quantidade) * Number($("#qdtItem").val())) );
	} catch(erro){
		alert("A qunatidade do imtem está incorreta!");
		/* jk_toasth("error", "A qunatidade do imtem está incorreta!", 5000); */
	}

	/* $("#vlrVenda").val( formataValorParaImprimir(parseFloat(preco_medio)) ); */
	calcularTotal();
}


function calcularTotal(){
	/* $("#selectUnidadeMedid").val(); */
	/* var qunatidade = $("#qdtItem").val(); */
	var quantidadePrincipal = formataValorParaCalcular2($("#qtdPrincipal").val());
	var vlrVenda = formataValorParaCalcular2($("#vlrVenda").val());
	var valorTotal = parseFloat(quantidadePrincipal) * parseFloat(vlrVenda); /* parseFloat(qunatidade) * */
	
	$("#vlrTotal").val(formataValorParaImprimir(valorTotal));
}



function mudarQdtItem(operacao){
	var quantidade = $("#qdtItem").val();
	quantidade = parseFloat(quantidade);

		 if (operacao == "-") {if(quantidade > 1) 	quantidade--;}
	else if (operacao == '+') 						quantidade++;
	else 											quantidade = operacao;

	$("#qdtItem").val(quantidade);
	$("#qtdPrincipal").val( 
		formatarValorParaDecimal(Number(item_Global.unidade_medida[$("#selectUnidadeMedid").val()].quantidade) * Number($("#qdtItem").val()))
	);
	calcularTotal();
}





var indiceEndereco_Global = 0;

function mudarCliente(cliente){
	cliente = parseInt(cliente);
	if (jk_validaCampo(cliente, "", "")) {
		$.ajax({
			url: caminhoServer+"cliente.php",
			type: 'POST',
			dataType: 'text',
			data:{
				'listarClienteId': true,
				'id': cliente,
				'codigo_empresa': empresa_Global.CODIGO
			},
			error: function(){
				alert("Codigo inválido!");
				/* jk_toasth("error", "Codigo inválido!", 5000); */
			}
		}).done( function(data){
			 /* console.log(data);  */
			if(jk_validaCampo(data, "", "Codigo invalido!")){
				cliente_Global = JSON.parse(data);
				$("#clienteSelecionado").val(cliente_Global.codigo+": "+cliente_Global.razaosocial);
				/* console.log(cliente_Global); */
				setarClienteSelecionado();
			} else $("#codigoCliente").val(cliente_Global.codigo);
		});
	} else {
		zerarCamposEndereco(false, "", false);
	}
}



function setarClienteSelecionado(){
	/* console.log("setarClienteSelecionado"); */
	var esquerdaEndereco = "";
	var diretaEndereco = "";
	var indicePagEndereco = "";

	if (cliente_Global.telefone.length != 0) {
		/* console.log("telefone Exite"); */
		$("#telefoneCliente").val(cliente_Global.telefone[0].telefone);
	} else {
		/* console.log("telefone não Exite"); */
		$("#telefoneCliente").val("");
	}

	if (cliente_Global.endereco.length > 0 && cliente_Global.endereco[0].cep != "00000000") {
		/* console.log("endereco exite"); */

		zerarCamposEndereco(true, "", false);
		$("#cepCliente").val(cliente_Global.endereco[0].cep);
		$("#enderecoCliente").val(cliente_Global.endereco[0].endereco);
		$("#numeroCliente").val(cliente_Global.endereco[0].numero);
		$("#bairroCliente").val(cliente_Global.endereco[0].bairro);
		$("#cidadeCliente").val(cliente_Global.endereco[0].cidade);
		$("#estadoCliente").val(cliente_Global.endereco[0].estado);

		indiceEndereco_Global = 0;

		if (cliente_Global.endereco.length > 1) {

			var indeceReal = 0;
			indicePagEndereco += "<center>";
			for (var i = 1; i <= cliente_Global.endereco.length && i < 21; i++) {
				indeceReal = i - 1;
				indicePagEndereco += "<a href='#' class='tamanhoTotal' style='color: blue' name='indiceEndereco' onclick='setarEnderecoIndece("+indeceReal+", this)'>"+i+"</a>&nbsp;&nbsp;";
			}
			indicePagEndereco += "</center>";
			$("#indicePagEndereco").html(indicePagEndereco);


			esquerdaEndereco += "<a href='#' onclick='moverEndereco(\"e\")'>";
			esquerdaEndereco += 	"<i class='fa fa-arrow-left'></i>";
			esquerdaEndereco += "</a>";

			diretaEndereco += 	"<a href='#' onclick='moverEndereco(\"d\")'>";
			diretaEndereco += 		"<i class='fa fa-arrow-right'></i>";
			diretaEndereco += 	"</a>";

			$("#esquerdaEndereco").html("");
			$("#diretaEndereco").html(diretaEndereco);
		} else {
			$("#esquerdaEndereco").html("");
			$("#diretaEndereco").html("");
			$("#indicePagEndereco").html("");
		}
	} else {
		zerarCamposEndereco(false, "", false);
	}

	$("#codigoCliente").val(cliente_Global.codigo);
	$("#clienteCombo_Global").val(cliente_Global.codigo);
	$("#clienteCombo_Global-flexdatalist").val(cliente_Global.codigo);
	$("#clienteSemRegistro").val(cliente_Global.razaosocial);
}



function setarSemRegistro(valor){
	/* console.log("setarSemRegistro: "); */
	try{
		document.getElementById("clienteCombo_Global-flexdatalist-results").style.display = "none";
	} catch(error){
		/* console.log(error); */
	}

	if (valor != "") {
		if (typeof(cliente_Global) == "object" && valor == cliente_Global.razaosocial) {
			document.getElementById("codigoCliente").disabled = false;
			document.getElementById("clienteCombo_Global").disabled = false;
			document.getElementById("clienteCombo_Global-flexdatalist").disabled = false;	
		} else {
			cliente_Global = "";
			zerarCamposEndereco(false, "", false);
			document.getElementById("codigoCliente").disabled = true;
			document.getElementById("clienteCombo_Global").disabled = true;
			document.getElementById("clienteCombo_Global-flexdatalist").disabled = true;
			document.getElementById("codigoCliente").value = "";
			document.getElementById("telefoneCliente").value = "";

			document.getElementById("clienteSelecionado").value = "";
		}
	}
	else {
		cliente_Global = "";
		/*if(cliente_Global != "" || typeof(cliente_Global) == "object"){
			$("#clienteSelecionado").val(cliente_Global.codigo+": "+cliente_Global.razaosocial); */
			/* setarClienteSelecionado(); */
		/* } */
		document.getElementById("codigoCliente").disabled = false;
		document.getElementById("clienteCombo_Global").disabled = false;
		document.getElementById("clienteCombo_Global-flexdatalist").disabled = false;
	}
}



function zerarCamposEndereco(valorDisabled, valorCep, valorDisabledCep){
	/* $("#cepCliente").val(valorCep); */
	$("#enderecoCliente").val("");
	$("#numeroCliente").val("");
	$("#bairroCliente").val("");
	$("#cidadeCliente").val("");
	$("#estadoCliente").val("");
	/* document.getElementById("cepCliente").disabled = valorDisabledCep; */
	document.getElementById("enderecoCliente").disabled = valorDisabled;
	/* document.getElementById("numeroCliente").disabled = valorDisabledCep; */
	document.getElementById("bairroCliente").disabled = valorDisabled;
	document.getElementById("cidadeCliente").disabled = valorDisabled;
	document.getElementById("estadoCliente").disabled = valorDisabled;

	$("#esquerdaEndereco").html("");
	$("#diretaEndereco").html("");
	$("#indicePagEndereco").html("");

	$("#clienteCombo_Global").val("");
	$("#clienteCombo_Global-flexdatalist").val("");
}



function moverEndereco(direcao){
	if (direcao == 'e' && (indiceEndereco_Global - 1) >= 0) {
		indiceEndereco_Global--;
	} else if (direcao == 'd' && (indiceEndereco_Global + 1) < cliente_Global.endereco.length) {
		indiceEndereco_Global++;
	}

	/* zerarCamposEndereco = limpa todos os campos e habilita ou desabilita o disabled */
	zerarCamposEndereco(true, "", false);

	$("#clienteCombo_Global").val(cliente_Global.codigo);
	/* $("#clienteCombo_Global-flexdatalist").val(cliente_Global.razaosocial); */
	$("#clienteCombo_Global-flexdatalist").val(cliente_Global.codigo);
	$("#clienteSemRegistro").val(cliente_Global.razaosocial);

	$("#cepCliente").val(cliente_Global.endereco[indiceEndereco_Global].cep);
	$("#enderecoCliente").val(cliente_Global.endereco[indiceEndereco_Global].endereco);
	$("#numeroCliente").val(cliente_Global.endereco[indiceEndereco_Global].numero);
	$("#bairroCliente").val(cliente_Global.endereco[indiceEndereco_Global].bairro);
	$("#cidadeCliente").val(cliente_Global.endereco[indiceEndereco_Global].cidade);
	$("#estadoCliente").val(cliente_Global.endereco[indiceEndereco_Global].estado);
	validaSetaEndereco();
}

function setarEnderecoIndece(indice, elemento){
	indiceEndereco_Global = indice;

	/* zerarCamposEndereco = limpa todos os campos e habilita ou desabilita o disabled */
	zerarCamposEndereco(true, "", false);

	$("#clienteCombo_Global").val(cliente_Global.codigo);
	/* $("#clienteCombo_Global-flexdatalist").val(cliente_Global.razaosocial); */
	$("#clienteCombo_Global-flexdatalist").val(cliente_Global.codigo);
	$("#clienteSemRegistro").val(cliente_Global.razaosocial);

	$("#cepCliente").val(cliente_Global.endereco[indice].cep);
	$("#enderecoCliente").val(cliente_Global.endereco[indice].endereco);
	$("#numeroCliente").val(cliente_Global.endereco[indice].numero);
	$("#bairroCliente").val(cliente_Global.endereco[indice].bairro);
	$("#cidadeCliente").val(cliente_Global.endereco[indice].cidade);
	$("#estadoCliente").val(cliente_Global.endereco[indice].estado);
	validaSetaEndereco();
}

function validaSetaEndereco(){
	var esquerdaEndereco = "";
	var diretaEndereco = "";

	if (indiceEndereco_Global > 0) {
		esquerdaEndereco += "<a href='#' onclick='moverEndereco(\"e\")'>";
		esquerdaEndereco += 	"<i class='fa fa-arrow-left'></i>";
		esquerdaEndereco += "</a>";
	}
	if ((indiceEndereco_Global + 1) < cliente_Global.endereco.length) {
		diretaEndereco += 	"<a href='#' onclick='moverEndereco(\"d\")'>";
		diretaEndereco += 		"<i class='fa fa-arrow-right'></i>";
		diretaEndereco += 	"</a>";
	}
	$("#esquerdaEndereco").html(esquerdaEndereco);
	$("#diretaEndereco").html(diretaEndereco);

	/* Indices de paginação dos endereços */
	var indicePagEndereco = "";
	indicePagEndereco += "<center>";
	if (cliente_Global.endereco.length > 20) {
		var indeceReal = 0;
		var indiceMinimo = indiceEndereco_Global - 9;
		if(indiceMinimo < 0) indiceMinimo = 1;

		for ( var i = indiceMinimo; i <= cliente_Global.endereco.length && i < (indiceMinimo + 20); i++ ) {
			if (i > 0) {
				indeceReal = i - 1;
				indicePagEndereco += "<a href='#' class='tamanhoTotal' style='color: blue' name='indiceEndereco' onclick='setarEnderecoIndece("+indeceReal+", this)'>"+i+"</a>&nbsp;&nbsp;";
			}
		}
	} else {
		for (var i = 1; i <= cliente_Global.endereco.length && i < 21; i++) {
			indeceReal = i - 1;
			indicePagEndereco += "<a href='#' class='tamanhoTotal' style='color: blue' name='indiceEndereco' onclick='setarEnderecoIndece("+indeceReal+", this)'>"+i+"</a>&nbsp;&nbsp;";
		}
	}
	indicePagEndereco += "</center>";
	$("#indicePagEndereco").html(indicePagEndereco);
}



function mostrarPedidoPre(idPegina, elemento){
	mostrarPedido(idPegina, elemento);
}


function mostrarPedido(idPegina, elemento){
	var telaGeralAddPedido = document.getElementsByName("telaGeralAddPedido");
	for (var i = 0; i < telaGeralAddPedido.length; i++) {
		telaGeralAddPedido[i].className = "hidden";
	}
	document.getElementById(idPegina).className = "";

		 if (idPegina == "conteudoAdicionaPedidoItem" && typeof(item_Global) == "object") salvarPedido();
	else if (idPegina == "conteudoAdicionaPedidoItem" && idPegina == ultimaPaginaGlobal) aleret("Nenhum item selecionado!");
	ultimaPaginaGlobal = idPegina;
}







/***********************************************************************************************************/
/* BUSCAR POR CEP */
/***********************************************************************************************************/
function buscarCep(cep, arrayCampos){
	cep = cep.replace(/_/g, "");
	if (typeof(arrayCampos) == "string") arrayCampos = arrayCampos.split(",");

	zerarCamposEndereco(false, $("cepCliente").val(), false);

	if (cep.length == 9) {
		$.ajax({
			url: "https://viacep.com.br/ws/"+cep+"/json/",
			type: 'GET',
			cache: false,
			dataType: "json",
			contentType: "application/json; charset=utf-8",
			error: function(){
				/* console.log("Erro ao buscar Cep verifique sua conexão com a Internet!"); */
				buscaCepLocal(cep, arrayCampos);
			}
		}).done( function(dataCepWeb){
			/* console.log(dataCepWeb.erro); */
			if (dataCepWeb.erro) {
				buscaCepLocal(cep, arrayCampos);
				/* jk_toasth('error', "Erro ao tentar encontrar o CEP", 5000); */
			} else {
				zerarCamposEndereco(true, $("cepCliente").val(), false);
				/* ['enderecoCliente','numeroCliente','bairroCliente','cidadeCliente','estadoCliente']; */
				$("#"+arrayCampos[0]).val(dataCepWeb.logradouro);
				$("#"+arrayCampos[2]).val(dataCepWeb.bairro);
				$("#"+arrayCampos[3]).val(dataCepWeb.localidade);
				$("#"+arrayCampos[4]).val(dataCepWeb.uf);
				$('#'+arrayCampos[1]).focus();

				$("#codigoCliente").val(cliente_Global.codigo);
				$("#clienteCombo_Global").val(cliente_Global.codigo);
				/* $("#clienteCombo_Global-flexdatalist").val(cliente_Global.razaosocial); */
				$("#clienteCombo_Global-flexdatalist").val(cliente_Global.codigo);
				$("#clienteSemRegistro").val(cliente_Global.razaosocial);

				gravarViaCep(cep, dataCepWeb);
			}
		});
	}
}



function buscaCepLocal(cep, arrayCampos){
	$.ajax({
		url: caminhoServer+"pedido.php",
		type: 'POST',
		dataType: 'text',
		data:{ 
			'buscaCep': true,
			'cep': cep,
			'codigo_empresa': empresa_Global.CODIGO
		},
		error: function(){
			aleret("Erro ao buscar Cep, verifique sua conexão com a Internet!");
			/* console.log("Erro consulta local"); */
		}
	}).done( function(dataCepLocal){
		dataCepLocal = JSON.parse(dataCepLocal);

		if (dataCepLocal.length == 0) {
			alert("endereço invalido");
		} else {
			/* cep, endereco, bairro, cidade, estado, observacaoendereco, latitude, longitude, latitude_bairro, longitude_bairro */
			zerarCamposEndereco(true, $("cepCliente").val(), false);

			$("#"+arrayCampos[0]).val(dataCepLocal.endereco);
			$("#"+arrayCampos[2]).val(dataCepLocal.bairro);
			$("#"+arrayCampos[3]).val(dataCepLocal.cidade);
			$("#"+arrayCampos[4]).val(dataCepLocal.estado);
			$('#'+arrayCampos[1]).focus();

			$("#codigoCliente").val(cliente_Global.codigo);
			$("#clienteCombo_Global").val(cliente_Global.codigo);
			/* $("#clienteCombo_Global-flexdatalist").val(cliente_Global.razaosocial); */
			$("#clienteCombo_Global-flexdatalist").val(cliente_Global.codigo);
			$("#clienteSemRegistro").val(cliente_Global.razaosocial);
		}
	});
}




function gravarViaCep(cep, objetoRetorno){
	$.ajax({
		url: caminhoServer+"pedido.php",
		type: 'POST',
		dataType: 'text',
		data:{ 
			'gravarViaCep': true,
			'cep': cep,
			'logradouro': objetoRetorno.logradouro,
			'complemento': objetoRetorno.complemento,
			'bairro': objetoRetorno.bairro,
			'localidade': objetoRetorno.localidade,
			'uf': objetoRetorno.uf,
			'unidade': objetoRetorno.unidade,
			'ibge': objetoRetorno.ibge,
			'gia': objetoRetorno.gia,
			'codigo_empresa': empresa_Global.CODIGO
		}
	}).done( function(data){});
}









function confirmaAdicionarPedio(){
	/* console.log("confirmaAdicionarPedio"); */
	if (
		   statusPedido_Gloabal.tipoCliente 					!= typeof(cliente_Global)
		|| statusPedido_Gloabal.tipoItem 						!= typeof(item_Global)
		|| statusPedido_Gloabal.descricaoCliente 				!= $("#clienteSemRegistro").val()
		|| statusPedido_Gloabal.telefone 						!= $("#telefoneCliente").val()
		|| statusPedido_Gloabal.cep 							!= $("#cepCliente").val()
		|| statusPedido_Gloabal.endereco 						!= $("#enderecoCliente").val()
		|| statusPedido_Gloabal.numero 							!= $("#numeroCliente").val()
		|| statusPedido_Gloabal.bairro 							!= $("#bairroCliente").val()
		|| statusPedido_Gloabal.cidade 							!= $("#cidadeCliente").val()
		|| statusPedido_Gloabal.estado 							!= $("#estadoCliente").val()
		|| statusPedido_Gloabal.observacaoOrcamento 			!= $("#observacaoOrcamento").val()
		|| statusPedido_Gloabal.codPagamntoSelect 				!= $("#codPagamntoSelect").val()
		|| statusPedido_Gloabal.codigoItem 						!= $("#codigoItem").val()
		|| statusPedido_Gloabal.itemCombo_Global 				!= $("#itemCombo_Global").val()
		|| statusPedido_Gloabal.itemCombo_Global_flexdatalist	!= $("#itemCombo_Global-flexdatalist").val()
		|| statusPedido_Gloabal.qdtItem 						!= $("#qdtItem").val()
		|| statusPedido_Gloabal.qtdPrincipal 					!= $("#qtdPrincipal").val()
		|| statusPedido_Gloabal.divSelectUnidade 				!= $("#divSelectUnidade").html()
		|| statusPedido_Gloabal.vlrVenda 						!= $("#vlrVenda").val()
		|| statusPedido_Gloabal.vlrTotal 						!= $("#vlrTotal").val()
		|| statusPedido_Gloabal.estoqueProduto 					!= $("#estoqueProduto").val()
		|| statusPedido_Gloabal.conteudoItensPedidoExclusivo 	!= $("#conteudoItensPedidoExclusivo").html()
		|| statusPedido_Gloabal.totalPedido 					!= $("#totalPedido").val()
		|| statusPedido_Gloabal.contato 						!= $("#contatoPedido").val()
/* 		typeof(cliente_Global) == "object"		 || 
		$("#clienteSemRegistro").val() != ""	 || 
		typeof(item_Global) == "object" 		 ||
		$("#telefoneCliente").val() != ""		 ||
		$("#cepCliente").val() != ""			 ||
		$("#enderecoCliente").val() != ""		 ||
		$("#numeroCliente").val() != ""			 ||
		$("#bairroCliente").val() != ""			 ||
		$("#cidadeCliente").val() != "" 		 ||
		$("#estadoCliente").val() != "" */
	){
		if(confirm("Tem certaza que deseja fechar orçamento sem salvar?")) reiniciaOrcamentoTotal();
	}
	else reiniciaOrcamentoTotal();
}



function reiniciaOrcamentoTotal(){
	localStorage.setItem("id_pedido_Gloabal", "-1");

	/* configuraçõesd de Cliented */
	$("#clienteSemRegistro").val("");
	document.getElementById("clienteSemRegistro").disabled = false;
	$("#telefoneCliente").val("");
	$("#contatoPedido").val("");

	$("#cepCliente").val("");		/* Campos de Entrega */
	$("#enderecoCliente").val("");	/* Campos de Entrega */
	$("#numeroCliente").val("");	/* Campos de Entrega */
	$("#bairroCliente").val("");	/* Campos de Entrega */
	$("#cidadeCliente").val("");	/* Campos de Entrega */
	$("#estadoCliente").val("");	/* Campos de Entrega */


	/* Observação e pagamento */
	$("#observacaoOrcamento").val("");
	try 		{ $("#codPagamntoSelect").val("5 DINHEIRO"); 		}
	catch(error){ /* console.error(error); */ 						}

	/* Campos de adicionar itens */
	$("#codigoItem").val("");
	$("#itemCombo_Global").val("");
	$("#itemCombo_Global-flexdatalist").val("");
	$("#qdtItem").val("1");
	$("#qtdPrincipal").val("");
	$("#divSelectUnidade").html("<input type=\"text\" class=\"form-control\" value=\"Nenhum item selecionado\" disabled>");
	$("#vlrVenda").val("");
	$("#vlrTotal").val("");
	$("#estoqueProduto").val("");

	$("#conteudoItensPedidoExclusivo").html("<h3 class=\"text-center\">Nenhum Item no Pedido</h3>");

	/* Campo Geral do Orçamento */
	$("#totalPedido").val("R$ 0,00");

	adcionarPedido();
}




function jk_validaCampo(campo, mensagemSuccess, mensagemErro){
	var tipo = typeof(campo);
	var retorno = false;
	if (tipo == "string") {
		if (campo == "0" || campo == "") {
			if (mensagemErro != "") alert(mensagemErro);
			/* console.log(mensagemErro); */
			retorno = false;
		} else {
			if (mensagemSuccess != "") alert(mensagemSuccess);
			retorno = true;
		}
	} else if (tipo == "number") {
		if (campo == 0) {
			if (mensagemErro != "") alert(mensagemErro);
			retorno = false;
		} else {
			if (mensagemSuccess != "") alert(mensagemSuccess);
			retorno = true;
		}
	}
	return retorno;
}














</script>

<style type="text/css">
	.descricaoSituacao{
		padding: 5px;
		border-radius: 5px;
		/*color: white;*/
	}
</style>
</body>
</html>