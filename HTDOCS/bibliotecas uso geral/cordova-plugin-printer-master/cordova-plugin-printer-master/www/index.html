<!DOCTYPE html>
<html>
<head>
	<title>Impreimir file</title>
</head>
<body>
	<center>
		<h1 id='ELEMENT_TO_PRINT'>Impreimir arquirvo</h1>
		<br>
		<button onclick="imprimir();">
			Imprimir
		</button>

	</center>
	<script type="text/javascript" src="printer.js"></script>
	<script type="text/javascript">
		function imprimir(){

			var pdfHTML = document.getElementById('ELEMENT_TO_PRINT').innerHTML;
			var headstr = "<html><head><title></title></head><body>";
			var footstr = "</body>";
						
			var name = "downloaded_file.html";
							
			var filename = "cdvfile://localhost/persistent/" + name;
			
			var fileTransfer = new FileTransfer();
							
			fileTransfer.download(
				encodeURI('data:text/html;charset=utf-8,' + headstr+pdfHTML+footstr),
				filename,
				function(theFile){
								
					window.plugin.printer.isServiceAvailable(
						function (isAvailable, installedAppIds) {
									    	
							var isPrintShareInstalled = false;
									    	
							installedAppIds.forEach(function(entry) {
											    
								if(entry == 'com.dynamixsoftware.printershare') {
									isPrintShareInstalled = true;
								}
							});
											
							if(isPrintShareInstalled) { //Going to send file for printing
												
								var page = "<HTML>hi</HTML>";
								window.plugin.printer.print(page, { 'appId': 'com.dynamixsoftware.printershare','filename': name ,'mimeType': 'text/html'});
								return;
							} else {
									alert(null, "Please install PrinterShare app <br> from Google PlayStore for printing.");
								}
							}
					);
				},
				function(error) {
					alert("download error source " + error.source);
					alert("download error target " + error.target);
					alert("upload error code: " + error.code);
				},
				true
			);
			// window.plugin.printer.isServiceAvailable(
			//     function (isAvailable, installedAppIds) {
			//         alert('The following print apps are installed on your device: ' + installedAppIds.join(', '));

			//     }
			// );
		}
	</script>
</body>
</html>