function prodScan(){cordova.plugins.barcodeScanner.scan(function(o){buscarSetarProduto({cod:o.text,boolLeitor:!0})},function(o){alert("Scanning failed: "+o)})}function buscarSetarProduto(o){var a={cod:"",boolModal:!1,boolLeitor:!1,modalEquivalente:!1};o=$.extend({},a,o),console.log("buscarSetarProduto"),$("#modalCodFunc").modal("hide"),o.cod=o.cod.match(/[0-9]/g).join(""),o.cod.length>=13?$.ajax({url:ip_Global+"controllers/controllerProduto.php",type:"POST",dataType:"text",data:{buscaProduto:!0,cod:o.cod,usuarioID:usuario_Global.login},error:function(){alert("Falha ao tentar pesquisar Código do Produto!")}}).done(function(a){console.log(a);try{a=JSON.parse(a),console.log(a),produto_Global=a,1!=a.debug&&"1"!=a.debug&&"OK"!=a.debug?0==a.debug||"0"==a.debug?($("#buttonAddProduto")[0].className="input-group-addon",$("#buttonEquivalenteProduto")[0].className="hidden",o.boolLeitor&&modalAdicionarItem(o.cod)):($("#buttonAddProduto")[0].className="hidden",$("#buttonEquivalenteProduto")[0].className="hidden"):(descricaoSetadaProduto=a.quantidade_item+a.sigla_unidade_medida+" - "+a.descricao_item+" "+a.descricao_marca+(""!=a.especificacao_equivalentes?" (":"")+a.especificacao_equivalentes+(""!=a.especificacao_equivalentes?")":""),$("#id_produto").val(a.id_item),$("#cod_produto_pedido").val(a.codigo_item),$("#descricao_produto").val(descricaoSetadaProduto),$("#modalCadastroProduto").modal("hide"),$("#buttonAddProduto")[0].className="hidden",$("#buttonEquivalenteProduto")[0].className="input-group-addon")}catch(d){alert("Falha na converssão do objeto: "+d)}}):o.boolModal?($("#buttonAddProduto")[0].className="hidden",$("#buttonEquivalenteProduto")[0].className="hidden",alert("Codigo inválido!")):($("#buttonAddProduto")[0].className="hidden",$("#buttonEquivalenteProduto")[0].className="hidden")}function modalAdicionarItem(o){$("#codProdutoModla").val(o),$("#modalCadastroProduto").modal("show")}function modalRquivalenteItem(o){var a=produto_Global.quantidade_item+produto_Global.sigla_unidade_medida+" - "+produto_Global.descricao_item+" "+produto_Global.descricao_marca;$("#descricaoCompletaEspecificacaoModal").val(a),$("#modalEspecificacaoItem").modal("show")}function compararDescricaoProduto(o){descricaoSetadaProduto!=o?($("#cod_produto_pedido").val(""),$("#id_produto").val(""),$("#buttonEquivalenteProduto")[0].className="hidden"):""!=produto_Global&&($("#cod_produto_pedido").val(produto_Global.codigo_item),$("#id_produto").val(produto_Global.id_item),$("#buttonEquivalenteProduto")[0].className="input-group-addon")}function salvarProduto(o){o=$.extend({},{lista:!1,compra:!1},o);var a=!0,d=$("#id_produto").val(),e=$("#descricao_produto").val(),t=$("#qdtProdutoAdicionar").val(),i=$("#vlrUnitariProduto").val().replace(/e/gi,"");""!=d&&"0"!=d&&0!=d||""!=e?""==t||isNaN(t)?(a=!1,alert("Valor da quantidade inválido!")):o.compra&&(""==i||isNaN(i))&&(a=!1,alert("Valor Unitário inválido!")):(a=!1,alert("Produto nã especificado!")),a&&$.ajax({url:ip_Global+"controllers/controllerPedido.php",type:"POST",dataType:"text",data:{salvarPedido:!0,compra:!!o.compra||"",id_pedido:id_pedido_Global,id_supermecado:$("#selectSupermecado").val(),id_produto:d,descricao_produto:e,quantidade:t,valorUnitario:i,totalProduto:parseFloat(t)*parseFloat(i),usuarioID:usuario_Global.login}}).done(function(a){"0"!=a?(alert("Produto adicionado á"+(o.compra?" compra ":" lista de compra ")+"com sucesso!"),id_pedido_Global=a,localStorage.setItem("id_pedido_Global",id_pedido_Global)):alert("Falha ao tentar gravar")})}function novoPedido(){cofirm("Deseja iniciar um novo paedido?")&&(id_pedido_Global=0,localStorage.removeItem("id_pedido_Global"),$("#id_produto").val(""),$("#descricao_produto").val(""),$("#vlrUnitariProduto").val(""),$("#qdtProdutoAdicionar").val("1"))}var app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){document.querySelector("#scanProd").addEventListener("touchend",prodScan,!1)},receivedEvent:function(o){var a=document.getElementById(o),d=a.querySelector(".listening"),e=a.querySelector(".received");d.setAttribute("style","display:none;"),e.setAttribute("style","display:block;"),console.log("Received Event: "+o)}},produto_Global="",descricaoSetadaProduto="";